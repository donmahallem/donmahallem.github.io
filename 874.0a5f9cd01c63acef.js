"use strict";(self.webpackChunkDonMahallem=self.webpackChunkDonMahallem||[]).push([[874],{5874:(G,g,s)=>{s.r(g),s.d(g,{ReposModule:()=>D});var u=s(9808),d=s(4834),L=s(3954),m=s(9650),T=s(2916),c=s(0),Z=s(4004),t=s(5e3),y=s(3874),A=s(508);function I(e,n){if(1&e&&(t.TgZ(0,"h3",7),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.xp6(1),t.Oqu(o.header)}}function O(e,n){1&e&&t._UZ(0,"mat-divider")}const U=function(e){return["/repo",e]};function x(e,n){if(1&e&&(t.ynx(0),t.YNc(1,I,2,1,"h3",1),t.TgZ(2,"a",2),t.TgZ(3,"mat-icon",3),t._uU(4,"folder"),t.qZA(),t.TgZ(5,"h4",4),t._uU(6),t.qZA(),t.TgZ(7,"p",5),t._uU(8),t.qZA(),t.qZA(),t.YNc(9,O,1,0,"mat-divider",6),t.BQk()),2&e){const o=n.$implicit;t.xp6(1),t.Q6J("ngIf",o.hasHeader),t.xp6(1),t.Q6J("routerLink",t.VKq(5,U,o.repo.name)),t.xp6(4),t.Oqu(o.repo.name),t.xp6(2),t.hij(" ",o.repo.updated_at," "),t.xp6(1),t.Q6J("ngIf",o.hasDivider)}}let N=(()=>{class e{constructor(o){this.cdRef=o,this.items=[]}set repositories(o){this.items=o.sort((a,r)=>a.name.localeCompare(r.name)).map((a,r,i)=>{const l=r>0?i[r-1].name.charAt(0).toUpperCase():"",p=i[r].name.charAt(0).toUpperCase(),z=r<i.length-1?i[r+1].name.charAt(0).toUpperCase():"";return{hasDivider:r!==i.length-1&&p!==z,hasHeader:0===r||p!==l,header:p,repo:a}}),this.cdRef.detectChanges()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-repo-list"]],inputs:{repositories:"repositories"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matSubheader","",4,"ngIf"],["mat-list-item","",3,"routerLink"],["matListIcon",""],["matLine",""],["matLine","",1,"demo-2"],[4,"ngIf"],["matSubheader",""]],template:function(o,a){1&o&&(t.TgZ(0,"mat-nav-list"),t.YNc(1,x,10,7,"ng-container",0),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",a.items))},directives:[m.Hk,u.sg,u.O5,m.Tg,c.yS,y.Hw,m.Nh,A.X2,m.gs,d.d],styles:[""],changeDetection:0}),e})();var P=s(7423);const f=function(e){return["/repos",e]};function F(e,n){if(1&e&&(t.TgZ(0,"a",2),t._uU(1,"Previos"),t.qZA()),2&e){const o=t.oxw();t.Q6J("routerLink",t.VKq(1,f,o.page-1))}}function J(e,n){if(1&e&&(t.TgZ(0,"a",2),t._uU(1,"Next"),t.qZA()),2&e){const o=t.oxw();t.Q6J("routerLink",t.VKq(1,f,o.page+1))}}let R=(()=>{class e{constructor(o,a){this.activatedRoute=o,this.cdRef=a,this.repos=[],this.page=1}ngAfterViewInit(){this.updateSubscription=this.activatedRoute.data.pipe((0,Z.U)(o=>o.repos)).subscribe(o=>{this.update(o)})}getCurrentPage(){const o=this.activatedRoute.snapshot.params;return o.page?parseInt(o.page,10):1}hasNextPage(){return 25===this.repos.length}hasPreviousPage(){return this.getCurrentPage()>1}update(o){this.repos=o,this.page=this.getCurrentPage(),this.cdRef.detectChanges()}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(c.gz),t.Y36(t.sBO))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-repos-overview"]],decls:3,vars:3,consts:[[3,"repositories"],["mat-stroked-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-stroked-button","","color","accent",3,"routerLink"]],template:function(o,a){1&o&&(t._UZ(0,"app-repo-list",0),t.YNc(1,F,2,3,"a",1),t.YNc(2,J,2,3,"a",1)),2&o&&(t.Q6J("repositories",a.repos),t.xp6(1),t.Q6J("ngIf",a.hasPreviousPage()),t.xp6(1),t.Q6J("ngIf",a.hasNextPage()))},directives:[N,u.O5,P.zs,c.yS],styles:[""],changeDetection:0}),e})();var C=s(520),h=s(515),M=s(8505),Q=s(262),E=s(8118),Y=s(8624);let v=(()=>{class e{constructor(o,a,r){this.platformId=o,this.api=a,this.router=r,this.INT_REGEX=/^([1-9]+|0*[1-9][0-9]+)$/}validatePage(o){return this.INT_REGEX.test(o)}resolve(o,a){var r;let i=1;const l=null===(r=o.params)||void 0===r?void 0:r.page;if(l){if(!this.validatePage(l))return this.router.navigate(["repos"]),h.E;i=parseInt(l,10)}return this.api.getUserRepos(E.N.github.username,25,i).pipe((0,M.b)(p=>{if(0===p.length&&1!==i)throw new C.UA({status:404})}),(0,Q.K)(p=>{if(p instanceof C.UA){if(404===p.status&&(0,u.NF)(this.platformId))return this.router.navigate(["404"]),h.E;if(403===p.status)return console.log("Rate limit"),h.E}return h.E}))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(t.Lbi),t.LFG(Y.q),t.LFG(c.F0))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const S=[{component:R,path:"",pathMatch:"full",resolve:{repos:v}},{component:R,path:":page",resolve:{repos:v}}];let B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[c.Bz.forChild(S)],c.Bz]}),e})(),D=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[v],imports:[[u.ez,B,L.N6,d.t,m.ie,T._]]}),e})()}}]);