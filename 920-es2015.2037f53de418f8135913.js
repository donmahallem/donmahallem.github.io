"use strict";(self.webpackChunk_donmahallem_github_page=self.webpackChunk_donmahallem_github_page||[]).push([[920],{920:function(e,t,r){r.r(t),r.d(t,{ReposModule:function(){return P}});var s=r(8583),a=r(4834),n=r(3954),i=r(8992),o=r(2916),p=r(9018),c=r(3568),u=r(9019),h=r(7716),g=r(6401),l=r(8);let f=(()=>{class e{constructor(e,t){this.api=e,this.router=t}resolve(e,t){return this.api.getRepo(u.N.github.username,e.params.reponame).pipe((0,c.K)(e=>(404===e.status&&this.router.navigate(["stops"]),p.E)))}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(g.q),h.LFG(l.F0))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e})();var m=r(7969),d=r(4117),v=r(2626);function b(e,t){if(1&e&&(h.TgZ(0,"h3",7),h._uU(1),h.qZA()),2&e){const e=h.oxw().$implicit;h.xp6(1),h.Oqu(e.header)}}function Z(e,t){1&e&&h._UZ(0,"mat-divider")}const _=function(e){return["/repo",e]};function k(e,t){if(1&e&&(h.ynx(0),h.YNc(1,b,2,1,"h3",1),h.TgZ(2,"a",2),h.TgZ(3,"mat-icon",3),h._uU(4,"folder"),h.qZA(),h.TgZ(5,"h4",4),h._uU(6),h.qZA(),h.TgZ(7,"p",5),h._uU(8),h.qZA(),h.qZA(),h.YNc(9,Z,1,0,"mat-divider",6),h.BQk()),2&e){const e=t.$implicit;h.xp6(1),h.Q6J("ngIf",e.hasHeader),h.xp6(1),h.Q6J("routerLink",h.VKq(5,_,e.repo.name)),h.xp6(4),h.Oqu(e.repo.name),h.xp6(2),h.hij(" ",e.repo.updated_at," "),h.xp6(1),h.Q6J("ngIf",e.hasDivider)}}let w=(()=>{class e{constructor(e){this.cdRef=e,this.items=[]}set repositories(e){this.items=e.sort((e,t)=>e.name.localeCompare(t.name)).map((e,t,r)=>{const s=t>0?r[t-1].name.charAt(0).toUpperCase():"",a=r[t].name.charAt(0).toUpperCase(),n=t<r.length-1?r[t+1].name.charAt(0).toUpperCase():"";return{hasDivider:t!==r.length-1&&a!==n,hasHeader:0===t||a!==s,header:a,repo:e}}),this.cdRef.detectChanges()}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(h.sBO))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-repo-list"]],inputs:{repositories:"repositories"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matSubheader","",4,"ngIf"],["mat-list-item","",3,"routerLink"],["matListIcon",""],["matLine",""],["matLine","",1,"demo-2"],[4,"ngIf"],["matSubheader",""]],template:function(e,t){1&e&&(h.TgZ(0,"mat-nav-list"),h.YNc(1,k,10,7,"ng-container",0),h.qZA()),2&e&&(h.xp6(1),h.Q6J("ngForOf",t.items))},directives:[i.Hk,s.sg,s.O5,i.Tg,l.yS,d.Hw,i.Nh,v.X2,i.gs,a.d],styles:[""],changeDetection:0}),e})();var x=r(7423);const q=function(e){return["/repos",e]};function A(e,t){if(1&e&&(h.TgZ(0,"a",2),h._uU(1,"Previos"),h.qZA()),2&e){const e=h.oxw();h.Q6J("routerLink",h.VKq(1,q,e.page-1))}}function L(e,t){if(1&e&&(h.TgZ(0,"a",2),h._uU(1,"Next"),h.qZA()),2&e){const e=h.oxw();h.Q6J("routerLink",h.VKq(1,q,e.page+1))}}let N=(()=>{class e{constructor(e,t){this.activatedRoute=e,this.cdRef=t,this.repos=[],this.page=1}ngAfterViewInit(){this.updateSubscription=this.activatedRoute.data.pipe((0,m.U)(e=>e.repos)).subscribe(e=>{this.update(e)})}getCurrentPage(){const e=this.activatedRoute.snapshot.params;return e.page?parseInt(e.page,10):1}hasNextPage(){return 25===this.repos.length}hasPreviousPage(){return this.getCurrentPage()>1}update(e){this.repos=e,this.page=this.getCurrentPage(),this.cdRef.detectChanges()}ngOnDestroy(){this.updateSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(h.Y36(l.gz),h.Y36(h.sBO))},e.\u0275cmp=h.Xpm({type:e,selectors:[["app-repos-overview"]],decls:3,vars:3,consts:[[3,"repositories"],["mat-stroked-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-stroked-button","","color","accent",3,"routerLink"]],template:function(e,t){1&e&&(h._UZ(0,"app-repo-list",0),h.YNc(1,A,2,3,"a",1),h.YNc(2,L,2,3,"a",1)),2&e&&(h.Q6J("repositories",t.repos),h.xp6(1),h.Q6J("ngIf",t.hasPreviousPage()),h.xp6(1),h.Q6J("ngIf",t.hasNextPage()))},directives:[w,s.O5,x.zs,l.yS],styles:[""],changeDetection:0}),e})();var I=r(1841),U=r(8168);let R=(()=>{class e{constructor(e,t,r){this.platformId=e,this.api=t,this.router=r,this.INT_REGEX=/^([1-9]+|0*[1-9][0-9]+)$/}validatePage(e){return this.INT_REGEX.test(e)}resolve(e,t){let r=1;if(e.params.page){if(!this.validatePage(e.params.page))return this.router.navigate(["repos"]),p.E;r=e.params.page}return this.api.getUserRepos(u.N.github.username,25,r).pipe((0,U.b)(e=>{if(0===e.length&&1!==r)throw new I.UA({status:404})}),(0,c.K)(e=>404===e.status&&(0,s.NF)(this.platformId)?(this.router.navigate(["404"]),p.E):(403===e.status&&console.log("Rate limit"),p.E)))}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(h.Lbi),h.LFG(g.q),h.LFG(l.F0))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac}),e})();const y=[{component:N,path:"",pathMatch:"full",resolve:{repos:R}},{component:N,path:":page",resolve:{repos:R}}];let C=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({imports:[[l.Bz.forChild(y)],l.Bz]}),e})(),P=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.oAB({type:e}),e.\u0275inj=h.cJS({providers:[R,f],imports:[[s.ez,C,n.N6,a.t,i.ie,o._]]}),e})()}}]);