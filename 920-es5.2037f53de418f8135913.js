!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(self.webpackChunk_donmahallem_github_page=self.webpackChunk_donmahallem_github_page||[]).push([[920],{920:function(t,r,i){i.r(r),i.d(r,{ReposModule:function(){return J}});var a,o=i(8583),s=i(4834),u=i(3954),c=i(8992),p=i(2916),f=i(9018),h=i(3568),g=i(9019),l=i(7716),v=i(6401),m=i(8),d=((a=function(){function t(n,r){e(this,t),this.api=n,this.router=r}return n(t,[{key:"resolve",value:function(e,t){var n=this;return this.api.getRepo(g.N.github.username,e.params.reponame).pipe((0,h.K)(function(e){return 404===e.status&&n.router.navigate(["stops"]),f.E}))}}]),t}()).\u0275fac=function(e){return new(e||a)(l.LFG(v.q),l.LFG(m.F0))},a.\u0275prov=l.Yz7({token:a,factory:a.\u0275fac}),a),k=i(7969),y=i(4117),b=i(2626);function w(e,t){if(1&e&&(l.TgZ(0,"h3",7),l._uU(1),l.qZA()),2&e){var n=l.oxw().$implicit;l.xp6(1),l.Oqu(n.header)}}function Z(e,t){1&e&&l._UZ(0,"mat-divider")}var _=function(e){return["/repo",e]};function x(e,t){if(1&e&&(l.ynx(0),l.YNc(1,w,2,1,"h3",1),l.TgZ(2,"a",2),l.TgZ(3,"mat-icon",3),l._uU(4,"folder"),l.qZA(),l.TgZ(5,"h4",4),l._uU(6),l.qZA(),l.TgZ(7,"p",5),l._uU(8),l.qZA(),l.qZA(),l.YNc(9,Z,1,0,"mat-divider",6),l.BQk()),2&e){var n=t.$implicit;l.xp6(1),l.Q6J("ngIf",n.hasHeader),l.xp6(1),l.Q6J("routerLink",l.VKq(5,_,n.repo.name)),l.xp6(4),l.Oqu(n.repo.name),l.xp6(2),l.hij(" ",n.repo.updated_at," "),l.xp6(1),l.Q6J("ngIf",n.hasDivider)}}var q=function(){var t=function(){function t(n){e(this,t),this.cdRef=n,this.items=[]}return n(t,[{key:"repositories",set:function(e){this.items=e.sort(function(e,t){return e.name.localeCompare(t.name)}).map(function(e,t,n){var r=t>0?n[t-1].name.charAt(0).toUpperCase():"",i=n[t].name.charAt(0).toUpperCase(),a=t<n.length-1?n[t+1].name.charAt(0).toUpperCase():"";return{hasDivider:t!==n.length-1&&i!==a,hasHeader:0===t||i!==r,header:i,repo:e}}),this.cdRef.detectChanges()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(l.sBO))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-repo-list"]],inputs:{repositories:"repositories"},decls:2,vars:1,consts:[[4,"ngFor","ngForOf"],["matSubheader","",4,"ngIf"],["mat-list-item","",3,"routerLink"],["matListIcon",""],["matLine",""],["matLine","",1,"demo-2"],[4,"ngIf"],["matSubheader",""]],template:function(e,t){1&e&&(l.TgZ(0,"mat-nav-list"),l.YNc(1,x,10,7,"ng-container",0),l.qZA()),2&e&&(l.xp6(1),l.Q6J("ngForOf",t.items))},directives:[c.Hk,o.sg,o.O5,c.Tg,m.yS,y.Hw,c.Nh,b.X2,c.gs,s.d],styles:[""],changeDetection:0}),t}(),A=i(7423),L=function(e){return["/repos",e]};function N(e,t){if(1&e&&(l.TgZ(0,"a",2),l._uU(1,"Previos"),l.qZA()),2&e){var n=l.oxw();l.Q6J("routerLink",l.VKq(1,L,n.page-1))}}function I(e,t){if(1&e&&(l.TgZ(0,"a",2),l._uU(1,"Next"),l.qZA()),2&e){var n=l.oxw();l.Q6J("routerLink",l.VKq(1,L,n.page+1))}}var U=function(){var t=function(){function t(n,r){e(this,t),this.activatedRoute=n,this.cdRef=r,this.repos=[],this.page=1}return n(t,[{key:"ngAfterViewInit",value:function(){var e=this;this.updateSubscription=this.activatedRoute.data.pipe((0,k.U)(function(e){return e.repos})).subscribe(function(t){e.update(t)})}},{key:"getCurrentPage",value:function(){var e=this.activatedRoute.snapshot.params;return e.page?parseInt(e.page,10):1}},{key:"hasNextPage",value:function(){return 25===this.repos.length}},{key:"hasPreviousPage",value:function(){return this.getCurrentPage()>1}},{key:"update",value:function(e){this.repos=e,this.page=this.getCurrentPage(),this.cdRef.detectChanges()}},{key:"ngOnDestroy",value:function(){this.updateSubscription.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.Y36(m.gz),l.Y36(l.sBO))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-repos-overview"]],decls:3,vars:3,consts:[[3,"repositories"],["mat-stroked-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-stroked-button","","color","accent",3,"routerLink"]],template:function(e,t){1&e&&(l._UZ(0,"app-repo-list",0),l.YNc(1,N,2,3,"a",1),l.YNc(2,I,2,3,"a",1)),2&e&&(l.Q6J("repositories",t.repos),l.xp6(1),l.Q6J("ngIf",t.hasPreviousPage()),l.xp6(1),l.Q6J("ngIf",t.hasNextPage()))},directives:[q,o.O5,A.zs,m.yS],styles:[""],changeDetection:0}),t}(),C=i(1841),P=i(8168),R=function(){var t=function(){function t(n,r,i){e(this,t),this.platformId=n,this.api=r,this.router=i,this.INT_REGEX=/^([1-9]+|0*[1-9][0-9]+)$/}return n(t,[{key:"validatePage",value:function(e){return this.INT_REGEX.test(e)}},{key:"resolve",value:function(e,t){var n=this,r=1;if(e.params.page){if(!this.validatePage(e.params.page))return this.router.navigate(["repos"]),f.E;r=e.params.page}return this.api.getUserRepos(g.N.github.username,25,r).pipe((0,P.b)(function(e){if(0===e.length&&1!==r)throw new C.UA({status:404})}),(0,h.K)(function(e){return 404===e.status&&(0,o.NF)(n.platformId)?(n.router.navigate(["404"]),f.E):(403===e.status&&console.log("Rate limit"),f.E)}))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.LFG(l.Lbi),l.LFG(v.q),l.LFG(m.F0))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac}),t}(),T=[{component:U,path:"",pathMatch:"full",resolve:{repos:R}},{component:U,path:":page",resolve:{repos:R}}],F=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[m.Bz.forChild(T)],m.Bz]}),t}(),J=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[R,d],imports:[[o.ez,F,u.N6,s.t,c.ie,p._]]}),t}()}}])}();